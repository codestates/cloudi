import React, { useEffect, useRef } from 'react';
import styled from 'styled-components';
import { gsap } from 'gsap';

const StyledBackground = styled.svg`
  position: fixed;
  z-index: 0;

  width: 4000px;
  height: 1500px;
  fill: #E5E5E5;

  .cloud {
    opacity: 0.6;
  }
`;

const Background = () => {
  const clouds = useRef();
  const cloud = gsap.utils.selector(clouds);

  useEffect(() => {
    const curStage = window.location.href.split('/')[4];

    if (curStage === 'plate') {
      for (let i = 1; i <= 6; i++) {
        gsap.fromTo(cloud(`.cloud${i}`), {
          x: `${10 * i}`,
          y: `${300 / i}`
        }, {
          duration: 5,
          x: `-=${80 * i}`,
          y: `+=${180 * i}`
        });
      }

      gsap.to(cloud('.cloud'), {
        fill: '#EBEBEB'
      });
    } else if (curStage === 'holder') {
      for (let i = 1; i <= 6; i++) {
        gsap.to(cloud(`.cloud${i}`), {
          duration: 5,
          x: `-=${80 * i}`,
          y: `+=${180 * i}`
        });
      }

      gsap.to(cloud('.cloud'), {
        fill: '#EFEFEF'
      });
    } else if (curStage === 'text') {

      for (let i = 1; i <= 6; i++) {
        gsap.to(cloud(`.cloud${i}`), {
          duration: 5,
          x: `-=${80 * i}`,
          y: `+=${180 * i}`
        });
      }

      gsap.to(cloud('.cloud'), {
        fill: '#F0F0F0'
      });
    } else if (curStage === 'finish') {
      for (let i = 1; i <= 6; i++) {
        gsap.to(cloud(`.cloud${i}`), {
          duration: 5,
          x: `-=${50 * i}`,
          y: `+=${180 * i}`
        });
      }

      gsap.to(cloud('.cloud'), {
        fill: '#F4F4F4'
      });
    }
  }, [ window.location.href ]); // eslint-disable-line

  const onEnter = () => {
    for (let i = 1; i <= 6; i++) {
      gsap.to(cloud(`.cloud${i}`), {
        x: `+=${5 * i}`,
        y: `-=${10 * i}`
      });
    }
  };

  const onLeave = () => {
    for (let i = 1; i <= 6; i++) {
      gsap.to(cloud(`.cloud${i}`), {
        x: `-=${5 * i}`,
        y: `+=${10 * i}`
      });
    }
  };

  return (
    <StyledBackground ref={clouds} viewBox='-2800 400 9000 2000' fill='none' xmlns='http://www.w3.org/2000/svg'>
      <g className='cloud1'>
        <path className='cloud' d='M299.754 642.324c-54.557 0-81.835 26.554-88.655 39.832-27.278-13.278-90.019-24.895-122.753 34.853-32.734 59.748 51.829 83.813 98.203 88.377 1.364 11.203 13.093 34.355 49.101 37.343 36.007 2.987 71.378-6.224 84.563-11.203 2.728 19.086 23.187 54.52 83.199 43.566s79.562-46.056 81.835-62.237c21.823-9.543 58.922-42.073 32.734-95.846-26.187-53.773-95.474-52.28-126.844-44.811-7.729-9.958-36.826-29.874-91.383-29.874Z' />
        <path className='cloud' d='M299.754 642.324c-54.557 0-81.835 26.554-88.655 39.832-27.278-13.278-90.019-24.895-122.753 34.853-32.734 59.748 51.829 83.813 98.203 88.377 1.364 11.203 13.093 34.355 49.101 37.343 36.007 2.987 71.378-6.224 84.563-11.203 2.728 19.086 23.187 54.52 83.199 43.566s79.562-46.056 81.835-62.237c21.823-9.543 58.922-42.073 32.734-95.846-26.187-53.773-95.474-52.28-126.844-44.811-7.729-9.958-36.826-29.874-91.383-29.874Z' />
      </g>
      <g className='cloud2'>
        <path className='cloud' d='M2034.55 548.032c-36.67 10.652-51.08 38.332-53.7 50.84-22.7 6.859-65.75 31.714-56.32 76.259s64.18 47.611 90.38 43.576c3.93 10.491 21.74 32.925 61.56 38.735 39.81 5.811 91.68-8.069 112.64-15.736 2.62 5.246 16.76 15.736 52.39 15.736 35.62 0 45.4-19.367 45.84-29.051 29.69-8.07 81.99-34.135 53.7-73.838-28.29-39.703-78.15-48.822-99.54-48.419 2.18-19.367-3.67-61.975-44.53-77.469-40.87-15.494-79.03 11.297-93 26.63-7.86-6.859-32.74-17.915-69.42-7.263Z' />
        <path className='cloud' d='M3968.44 617.942c-57.34-2.011-108.42-22.628-126.8-32.685-36.75 7.543-115.77 9.554-137.82-42.742-22.05-52.297 49.61-72.075 88.2-75.428 4.6-10.895 24.81-36.205 68.91-50.285 44.11-14.08 90.05-5.866 107.51 0 15.62-13.409 64.5-38.216 135.06-30.171 70.57 8.046 93.72 56.99 96.48 80.456 54.21 5.029 153.81 29.166 118.52 85.485-35.28 56.319-145.17 45.256-195.7 32.685-27.57 11.733-97.03 34.697-154.36 32.685Z' />
      </g>
      <g className='cloud3' onMouseEnter={onEnter} onMouseLeave={onLeave}>
        <path className='cloud' d='M2424.65 449.23c-52.75 10.002-100.73-37.505-118.13-62.509-11.91 4.167-40.66 10.002-60.45 0-19.78-10.001-22.89-29.171-21.97-37.505-27.48 0-83.52-14.002-87.92-70.011-4.39-56.008 71.43-53.341 109.89-45.006.92-7.502 17.04-27.004 74.18-45.007 57.15-18.003 93.41 7.501 104.4 22.503 52.2-5 178.57-42.506 219.78 67.51 32.97 88.013-63.18 116.684-115.38 120.018-12.82 12.502-51.65 40.006-104.4 50.007Z' />
        <path className='cloud' d='M748.506 155.749c-77.939 0-116.908 38.288-126.65 57.432-38.969-19.144-128.598-35.895-175.361 50.253-46.763 86.149 74.041 120.847 140.289 127.428 1.948 16.153 18.705 49.535 70.144 53.843 51.439 4.307 101.97-8.974 120.805-16.153 3.897 27.52 33.123 78.61 118.856 62.817 85.732-15.794 113.661-66.407 116.911-89.738 31.17-13.76 84.17-60.663 46.76-138.197-37.41-77.533-136.393-75.38-181.208-64.611-11.041-14.358-52.608-43.074-130.546-43.074Z' />
        <path className='cloud' d='M3187.12-39.886c-76.32 22.212-106.31 79.93-111.76 106.014-47.25 14.303-136.84 66.132-117.21 159.021 19.62 92.888 133.56 99.283 188.08 90.869 8.18 21.876 45.25 68.657 128.12 80.773 82.87 12.115 190.81-16.828 234.42-32.814 5.46 10.938 34.9 32.814 109.04 32.814 74.14 0 94.5-40.387 95.41-60.58 61.78-16.828 170.64-71.181 111.76-153.973-58.88-82.792-162.65-101.807-207.17-100.965 4.54-40.387-7.63-129.237-92.68-161.546-85.05-32.309-164.46 23.559-193.54 55.531-16.35-14.303-68.15-37.357-144.47-15.144Z' />
      </g>
      <g className='cloud4'>
        <path className='cloud' d='M3096.63 72.186c-109.18 0-163.77 53.525-177.42 80.287-54.59-26.762-180.14-50.179-245.65 70.25-65.51 120.429 103.72 168.935 196.52 178.134 2.73 22.581 26.2 69.247 98.26 75.269 72.06 6.021 142.84-12.545 169.23-22.581 5.46 38.471 46.4 109.892 166.5 87.813 120.09-22.079 159.22-92.831 163.77-125.447 43.67-19.235 117.91-84.802 65.5-193.188-52.4-108.386-191.06-105.376-253.84-90.322-15.47-20.071-73.69-60.215-182.87-60.215Z' />
        <path className='cloud' d='M1218.45 571.332c-46.75-58.791 19.49-109.007 58.45-126.767 0-26.333 16.53-83.042 82.63-99.209 66.11-16.167 112.2 21.434 126.98 42.256 8.73-4.899 46.35-12.861 126.97-5.512 80.62 7.349 100.77 47.155 100.77 66.139 59.12.613 170.91 23.149 145.11 108.395-25.8 85.246-127.64 83.287-175.34 71.651-10.08 15.31-49.58 48.87-126.97 60.628-77.4 11.758-134.37-30.62-153.18-53.279-46.35 0-126.97 9.186-185.42-64.302Z' />
        <path className='cloud' d='M886.737 204.617c-151.019 0-201.541 61.866-207.925 92.8-98.491 0-136.793 0-213.396 65.21-61.284 52.169-12.768 123.734 19.151 152.995-16.416 14.213-25.718 59.693 68.396 127.913 94.113 68.221 196.07 28.426 235.283 0 42.862 20.901 154.303 58.69 257.174 42.638 102.86-16.052 179.65-86.948 205.19-120.389 77.51-9.196 219.96-59.191 169.62-185.6-50.34-126.408-270.85-116.209-374.81-95.308-32.83-66.214-119.469-81.095-158.683-80.259Z' />
        <path className='cloud' d='M2206.2 285.688c-77.32 11.783-134.23-17.183-153.03-33.14-24.16 0-82.95-2.945-124.83-14.728-41.88-11.783-60.41-63.825-64.44-88.373-72.48-29.458-133.68-109.211-72.48-180.428 44.3-51.551 173.16-27.003 221.48 0 5.37-18.411 51.55-55.97 193.3-58.915 141.75-2.946 163.77 57.687 157.05 88.372 79.2-6.137 229.54 8.101 197.33 114.149-32.22 106.047-169.14 110.466-233.57 99.419-8.05 19.639-43.49 61.861-120.81 73.644Z' />
      </g>
      <g className='cloud5'>
        <path className='cloud' d='M3305.95 34.914c69.43 87.573-28.93 162.375-86.79 188.83 0 39.225-24.54 123.697-122.69 147.779-98.16 24.083-166.59-31.927-188.54-62.943-12.97 7.298-68.83 19.157-188.53 8.21-119.71-10.947-149.63-70.241-149.63-98.52-87.79-.912-253.78-34.482-215.47-161.463s189.53-124.062 260.36-106.73c14.96-22.805 73.61-72.795 188.53-90.31 114.92-17.514 199.51 45.611 227.44 79.364 68.83 0 188.53-13.684 275.32 95.783Z' />
        <path className='cloud' d='M675.207-1.12c38.583-82.708 128.609-96.82 168.799-93.539 6.649-17.61 28.519-56.902 62.815-73.185 34.295-16.284 74.229-20.354 89.908-20.354 21.431-61.54 85.741-110.771 246.501-128.002 128.61-13.784 217.92 54.975 246.5 91.078 235.78 34.462 332.24 206.772 206.31 349.543-100.74 114.217-300.98 90.257-388.51 64.001-26.79 18.051-106.1 52.677-208.99 46.769-102.882-5.907-157.184-51.693-171.474-73.847-24.529 19.164-83.456 14.549-109.853 9.847-85.739-12.308-190.234-68.924-142.006-172.31Z' />
      </g>
      <g className='cloud6'>
        <path className='cloud' d='M3509.79-152.511c-67.56-85.534 28.15-158.594 84.45-184.432 0-38.313 23.87-120.817 119.39-144.339 95.51-23.522 162.1 31.184 183.46 61.478 12.62-7.128 66.97-18.711 183.45-8.019 116.49 10.692 145.61 68.605 145.61 96.225 85.41.891 246.94 33.679 209.66 157.703-37.27 124.024-184.43 121.173-253.34 104.245-14.56 22.274-71.64 71.1-183.46 88.207-111.82 17.106-194.14-44.55-221.32-77.516-66.97 0-183.45 13.365-267.9-93.552Z' />
        <path className='cloud' d='M1941.32 79.442c-88.28 25.682-122.96 92.418-129.26 122.576-54.65 16.538-158.27 76.464-135.57 183.863 22.7 107.4 154.48 114.794 217.54 105.065 9.46 25.294 52.33 79.383 148.17 93.392 95.85 14.008 220.7-19.457 271.14-37.941 6.3 12.647 40.35 37.941 126.11 37.941 85.75 0 109.29-46.696 110.34-70.044 71.46-19.456 197.36-82.301 129.26-178.027-68.09-95.726-188.11-117.711-239.6-116.738 5.25-46.696-8.83-149.426-107.19-186.783-98.37-37.356-190.22 27.24-223.85 64.207-18.91-16.538-78.82-43.194-167.09-17.511Z' />
        <path className='cloud' d='M-275.936 64.79c3.297-81.519 127.486-101.647 168.15-105.673-19.783-33.211-46.159-105.672 92.317-181.153 110.782-60.384 246.181-41.262 300.033-24.154 32.971-28.179 129.245-78.499 250.577-54.345 121.331 24.153 131.882 112.717 121.991 153.98 31.872-1.007 111.441 11.473 174.744 69.442C895.18-19.144 845.064 41.643 812.094 64.79c38.465 24.154 88.361 91.18-19.783 166.057-108.143 74.877-236.289 31.198-286.844 0-59.347 42.269-141.774 36.231-243.982 42.269-81.768 4.831-218.705-54.346-276.954-84.538-138.476 21.134-263.764-42.269-260.467-123.788Z' />
      </g>
    </StyledBackground>
  );
};

export default Background;
